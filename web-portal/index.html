<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UnderTheRadar VPN - Secure, Fast, Private</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .vpn-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .vpn-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <i class="fas fa-shield-alt text-2xl text-blue-400 mr-3"></i>
                    <span class="text-xl font-bold">UnderTheRadar VPN</span>
                </div>
                <div class="hidden md:block">
                    <div class="flex items-center space-x-8">
                        <a href="#features" class="hover:text-blue-400 transition-colors">Features</a>
                        <a href="#pricing" class="hover:text-blue-400 transition-colors">Pricing</a>
                        <button onclick="showLogin()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors">Login</button>
                        <button onclick="showRegister()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">Get Started</button>
                    </div>
                </div>
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-white hover:text-blue-400">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 z-40 hidden">
        <div class="fixed inset-0 bg-black opacity-50"></div>
        <div class="fixed right-0 top-0 h-full w-64 glass p-6">
            <button onclick="toggleMobileMenu()" class="float-right text-white hover:text-blue-400 mb-8">
                <i class="fas fa-times text-xl"></i>
            </button>
            <div class="clear-both space-y-6">
                <a href="#features" class="block hover:text-blue-400">Features</a>
                <a href="#pricing" class="block hover:text-blue-400">Pricing</a>
                <button onclick="showLogin()" class="block w-full text-left bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg">Login</button>
                <button onclick="showRegister()" class="block w-full text-left bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg">Get Started</button>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="gradient-bg min-h-screen flex items-center relative overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-20"></div>
        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-5xl md:text-7xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white to-blue-400">
                Secure. Fast. Private.
            </h1>
            <p class="text-xl md:text-2xl mb-8 text-gray-200 max-w-3xl mx-auto">
                Experience the internet without boundaries. Military-grade encryption, lightning-fast speeds, and complete privacy.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <button onclick="showRegister()" class="bg-green-600 hover:bg-green-700 px-8 py-4 rounded-lg text-lg font-semibold transition-all transform hover:scale-105">
                    Start Free Trial <i class="fas fa-arrow-right ml-2"></i>
                </button>
                <button onclick="scrollTo('#features')" class="border border-white hover:bg-white hover:text-gray-900 px-8 py-4 rounded-lg text-lg font-semibold transition-all">
                    Learn More
                </button>
            </div>
            <div class="mt-8 flex justify-center items-center space-x-8 text-sm text-gray-300">
                <span><i class="fas fa-check text-green-400 mr-2"></i>7-day free trial</span>
                <span><i class="fas fa-check text-green-400 mr-2"></i>No logs policy</span>
                <span><i class="fas fa-check text-green-400 mr-2"></i>30-day guarantee</span>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-20 bg-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold mb-4">Why Choose UnderTheRadar?</h2>
                <p class="text-xl text-gray-400">Built for privacy, optimized for performance</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="vpn-card glass p-6 rounded-xl">
                    <div class="text-4xl mb-4 text-blue-400">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Lightning Fast</h3>
                    <p class="text-gray-300">Optimized WireGuard protocol delivers speeds up to 10x faster than traditional VPNs.</p>
                </div>
                <div class="vpn-card glass p-6 rounded-xl">
                    <div class="text-4xl mb-4 text-green-400">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Military Grade Security</h3>
                    <p class="text-gray-300">ChaCha20 encryption with perfect forward secrecy protects your data.</p>
                </div>
                <div class="vpn-card glass p-6 rounded-xl">
                    <div class="text-4xl mb-4 text-purple-400">
                        <i class="fas fa-eye-slash"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Zero Logs Policy</h3>
                    <p class="text-gray-300">We don't track, store, or share your browsing data. Ever.</p>
                </div>
                <div class="vpn-card glass p-6 rounded-xl">
                    <div class="text-4xl mb-4 text-red-400">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">Global Network</h3>
                    <p class="text-gray-300">High-performance servers in 50+ countries for optimal speed and access.</p>
                </div>
                <div class="vpn-card glass p-6 rounded-xl">
                    <div class="text-4xl mb-4 text-yellow-400">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">All Devices</h3>
                    <p class="text-gray-300">Native apps for Windows, Mac, iOS, Android, and Linux.</p>
                </div>
                <div class="vpn-card glass p-6 rounded-xl">
                    <div class="text-4xl mb-4 text-cyan-400">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">24/7 Support</h3>
                    <p class="text-gray-300">Expert support team ready to help you anytime, anywhere.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="py-20 bg-gray-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold mb-4">Simple, Transparent Pricing</h2>
                <p class="text-xl text-gray-400">Choose the plan that fits your needs</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Trial -->
                <div class="glass p-8 rounded-xl border-2 border-transparent">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold mb-2">Free Trial</h3>
                        <div class="text-4xl font-bold mb-4">$0<span class="text-lg text-gray-400">/7 days</span></div>
                        <ul class="text-left mb-8 space-y-3">
                            <li><i class="fas fa-check text-green-400 mr-3"></i>1 Device</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>All Servers</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>Unlimited Bandwidth</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>24/7 Support</li>
                        </ul>
                        <button onclick="startTrial()" class="w-full bg-gray-700 hover:bg-gray-600 py-3 rounded-lg font-semibold transition-colors">
                            Start Free Trial
                        </button>
                    </div>
                </div>
                
                <!-- Basic -->
                <div class="glass p-8 rounded-xl border-2 border-blue-500 transform scale-105">
                    <div class="text-center">
                        <div class="bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-bold mb-4">Most Popular</div>
                        <h3 class="text-2xl font-bold mb-2">Basic</h3>
                        <div class="text-4xl font-bold mb-4">$5<span class="text-lg text-gray-400">/month</span></div>
                        <ul class="text-left mb-8 space-y-3">
                            <li><i class="fas fa-check text-green-400 mr-3"></i>3 Devices</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>All Servers</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>Unlimited Bandwidth</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>Kill Switch</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>24/7 Support</li>
                        </ul>
                        <button onclick="selectPlan('basic')" class="w-full bg-blue-600 hover:bg-blue-700 py-3 rounded-lg font-semibold transition-colors">
                            Choose Basic
                        </button>
                    </div>
                </div>
                
                <!-- Premium -->
                <div class="glass p-8 rounded-xl border-2 border-transparent">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold mb-2">Premium</h3>
                        <div class="text-4xl font-bold mb-4">$10<span class="text-lg text-gray-400">/month</span></div>
                        <ul class="text-left mb-8 space-y-3">
                            <li><i class="fas fa-check text-green-400 mr-3"></i>10 Devices</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>All Servers + Priority</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>Unlimited Bandwidth</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>Advanced Features</li>
                            <li><i class="fas fa-check text-green-400 mr-3"></i>Priority Support</li>
                        </ul>
                        <button onclick="selectPlan('premium')" class="w-full bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-semibold transition-colors">
                            Choose Premium
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Auth Modals -->
    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 z-50 hidden">
        <div class="fixed inset-0 bg-black opacity-50" onclick="hideModals()"></div>
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="glass p-8 rounded-xl w-full max-w-md">
                <h2 class="text-2xl font-bold mb-6 text-center">Welcome Back</h2>
                <form id="login-form" onsubmit="handleLogin(event)">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Email</label>
                        <input type="email" name="email" required class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">Password</label>
                        <input type="password" name="password" required class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 py-3 rounded-lg font-semibold transition-colors">
                        Sign In
                    </button>
                </form>
                <p class="text-center mt-4 text-gray-400">
                    Don't have an account? 
                    <button onclick="showRegister()" class="text-blue-400 hover:underline">Sign up</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="register-modal" class="fixed inset-0 z-50 hidden">
        <div class="fixed inset-0 bg-black opacity-50" onclick="hideModals()"></div>
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="glass p-8 rounded-xl w-full max-w-md">
                <h2 class="text-2xl font-bold mb-6 text-center">Get Started</h2>
                <form id="register-form" onsubmit="handleRegister(event)">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2">Email</label>
                        <input type="email" name="email" required class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:ring-2 focus:ring-green-500 outline-none">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">Password</label>
                        <input type="password" name="password" required minlength="8" class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:ring-2 focus:ring-green-500 outline-none">
                        <p class="text-xs text-gray-400 mt-1">At least 8 characters</p>
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 py-3 rounded-lg font-semibold transition-colors">
                        Start Free Trial
                    </button>
                </form>
                <p class="text-center mt-4 text-gray-400">
                    Already have an account? 
                    <button onclick="showLogin()" class="text-green-400 hover:underline">Sign in</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="hidden min-h-screen bg-gray-900 pt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold">VPN Dashboard</h1>
                <button onclick="logout()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
                    <i class="fas fa-sign-out-alt mr-2"></i>Logout
                </button>
            </div>

            <!-- User Info -->
            <div class="glass p-6 rounded-xl mb-8">
                <h2 class="text-xl font-bold mb-4">Account Information</h2>
                <div id="user-info" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <!-- VPN Clients -->
            <div class="glass p-6 rounded-xl mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold">My Devices</h2>
                    <button onclick="showAddDevice()" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-plus mr-2"></i>Add Device
                    </button>
                </div>
                <div id="vpn-clients" class="space-y-4">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add Device Modal -->
    <div id="add-device-modal" class="fixed inset-0 z-50 hidden">
        <div class="fixed inset-0 bg-black opacity-50" onclick="hideModals()"></div>
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="glass p-8 rounded-xl w-full max-w-md">
                <h2 class="text-2xl font-bold mb-6 text-center">Add New Device</h2>
                <form id="add-device-form" onsubmit="handleAddDevice(event)">
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">Device Name</label>
                        <input type="text" name="name" required placeholder="e.g., iPhone, Laptop" class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:ring-2 focus:ring-green-500 outline-none">
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 py-3 rounded-lg font-semibold transition-colors">
                        Create Device
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // API Configuration
        const API_BASE = window.location.origin + '/api';
        let authToken = localStorage.getItem('authToken');
        let currentUser = null;

        // Show/Hide Modals
        function showLogin() {
            hideModals();
            document.getElementById('login-modal').classList.remove('hidden');
        }

        function showRegister() {
            hideModals();
            document.getElementById('register-modal').classList.remove('hidden');
        }

        function showAddDevice() {
            document.getElementById('add-device-modal').classList.remove('hidden');
        }

        function hideModals() {
            document.querySelectorAll('.fixed.inset-0.z-50').forEach(modal => {
                modal.classList.add('hidden');
            });
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        // API Helper
        async function apiCall(endpoint, options = {}) {
            const url = API_BASE + endpoint;
            const config = {
                headers: {
                    'Content-Type': 'application/json',
                    ...(authToken && { 'Authorization': `Bearer ${authToken}` })
                },
                ...options
            };

            try {
                const response = await fetch(url, config);
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Request failed');
                }
                
                return data;
            } catch (error) {
                console.error('API Error:', error);
                throw error;
            }
        }

        // Authentication
        async function handleLogin(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            try {
                const data = await apiCall('/login', {
                    method: 'POST',
                    body: JSON.stringify({
                        email: formData.get('email'),
                        password: formData.get('password')
                    })
                });

                authToken = data.token;
                currentUser = data.user;
                localStorage.setItem('authToken', authToken);
                
                hideModals();
                showDashboard();
            } catch (error) {
                alert('Login failed: ' + error.message);
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            try {
                const data = await apiCall('/register', {
                    method: 'POST',
                    body: JSON.stringify({
                        email: formData.get('email'),
                        password: formData.get('password')
                    })
                });

                authToken = data.token;
                currentUser = data.user;
                localStorage.setItem('authToken', authToken);
                
                hideModals();
                showDashboard();
            } catch (error) {
                alert('Registration failed: ' + error.message);
            }
        }

        function logout() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('authToken');
            showLanding();
        }

        // Dashboard
        async function showDashboard() {
            document.querySelector('.gradient-bg').style.display = 'none';
            document.getElementById('features').style.display = 'none';
            document.getElementById('pricing').style.display = 'none';
            document.getElementById('dashboard').classList.remove('hidden');
            
            await loadUserProfile();
            await loadVPNClients();
        }

        function showLanding() {
            document.querySelector('.gradient-bg').style.display = 'flex';
            document.getElementById('features').style.display = 'block';
            document.getElementById('pricing').style.display = 'block';
            document.getElementById('dashboard').classList.add('hidden');
        }

        async function loadUserProfile() {
            try {
                const data = await apiCall('/profile');
                currentUser = data.user;
                
                document.getElementById('user-info').innerHTML = `
                    <div>
                        <h3 class="font-semibold text-gray-300">Email</h3>
                        <p class="text-lg">${currentUser.email}</p>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-300">Subscription</h3>
                        <p class="text-lg capitalize">${currentUser.subscriptionType}</p>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-300">Expires</h3>
                        <p class="text-lg">${new Date(currentUser.subscriptionExpiry).toLocaleDateString()}</p>
                    </div>
                `;
            } catch (error) {
                console.error('Failed to load profile:', error);
            }
        }

        async function loadVPNClients() {
            try {
                const data = await apiCall('/profile');
                const clients = data.user.VPNClients || [];
                
                const clientsHTML = clients.map(client => `
                    <div class="glass p-4 rounded-lg">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3 class="font-semibold text-lg">${client.name}</h3>
                                <p class="text-gray-400">${client.ipAddress}</p>
                                <p class="text-sm text-gray-500">Created: ${new Date(client.createdAt).toLocaleDateString()}</p>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="downloadConfig('${client.id}')" class="bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded text-sm transition-colors">
                                    <i class="fas fa-download mr-1"></i>Config
                                </button>
                                <button onclick="showQRCode('${client.id}')" class="bg-green-600 hover:bg-green-700 px-3 py-2 rounded text-sm transition-colors">
                                    <i class="fas fa-qrcode mr-1"></i>QR
                                </button>
                                <button onclick="deleteClient('${client.id}')" class="bg-red-600 hover:bg-red-700 px-3 py-2 rounded text-sm transition-colors">
                                    <i class="fas fa-trash mr-1"></i>Delete
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                document.getElementById('vpn-clients').innerHTML = clientsHTML || '<p class="text-gray-400">No devices configured yet.</p>';
            } catch (error) {
                console.error('Failed to load clients:', error);
            }
        }

        async function handleAddDevice(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            try {
                await apiCall('/clients', {
                    method: 'POST',
                    body: JSON.stringify({
                        name: formData.get('name')
                    })
                });
                
                hideModals();
                await loadVPNClients();
                event.target.reset();
            } catch (error) {
                alert('Failed to create device: ' + error.message);
            }
        }

        async function downloadConfig(clientId) {
            try {
                const data = await apiCall(`/clients/${clientId}/config`);
                const blob = new Blob([data.config], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'wireguard-config.conf';
                a.click();
                window.URL.revokeObjectURL(url);
            } catch (error) {
                alert('Failed to download config: ' + error.message);
            }
        }

        async function showQRCode(clientId) {
            try {
                const data = await apiCall(`/clients/${clientId}/qr`);
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 z-50 flex items-center justify-center p-4';
                modal.innerHTML = `
                    <div class="fixed inset-0 bg-black opacity-50" onclick="this.parentElement.remove()"></div>
                    <div class="glass p-8 rounded-xl text-center">
                        <h2 class="text-xl font-bold mb-4">Scan with WireGuard App</h2>
                        <img src="${data.qrCode}" class="mx-auto mb-4" style="max-width: 256px;">
                        <button onclick="this.parentElement.parentElement.remove()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded">Close</button>
                    </div>
                `;
                document.body.appendChild(modal);
            } catch (error) {
                alert('Failed to generate QR code: ' + error.message);
            }
        }

        async function deleteClient(clientId) {
            if (!confirm('Are you sure you want to delete this device?')) return;
            
            try {
                await apiCall(`/clients/${clientId}`, { method: 'DELETE' });
                await loadVPNClients();
            } catch (error) {
                alert('Failed to delete client: ' + error.message);
            }
        }

        function startTrial() {
            showRegister();
        }

        function selectPlan(plan) {
            alert(`${plan} plan selected! This would integrate with Stripe for payment processing.`);
        }

        // Initialize app
        window.addEventListener('load', async () => {
            if (authToken) {
                try {
                    const data = await apiCall('/profile');
                    currentUser = data.user;
                    showDashboard();
                } catch (error) {
                    logout();
                }
            }
        });

        // Smooth scrolling
        function scrollTo(selector) {
            document.querySelector(selector).scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>